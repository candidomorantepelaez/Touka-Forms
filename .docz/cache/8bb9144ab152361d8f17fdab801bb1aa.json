{"remainingRequest":"/home/kan/desarrollo/proyectos/components/touka-forms/node_modules/babel-loader/lib/index.js?{\"presets\":[\"@babel/preset-env\",\"@babel/react\",[\"/home/kan/desarrollo/proyectos/components/touka-forms/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[\"@babel/plugin-proposal-class-properties\",[\"module-resolver\",{\"root\":[\"./src\"]}],[\"/home/kan/desarrollo/proyectos/components/touka-forms/node_modules/docz-core/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}]],\"babelrc\":false,\"cacheCompression\":true,\"compact\":true}!/home/kan/desarrollo/proyectos/components/touka-forms/src/hocs/with-form-context.jsx","dependencies":[{"path":"/home/kan/desarrollo/proyectos/components/touka-forms/src/hocs/with-form-context.jsx","mtime":1549053702061},{"path":"/home/kan/desarrollo/proyectos/components/touka-forms/node_modules/cache-loader/dist/cjs.js","mtime":1547306037965},{"path":"/home/kan/desarrollo/proyectos/components/touka-forms/node_modules/babel-loader/lib/index.js","mtime":1547246468683}],"contextDependencies":[],"result":["function _typeof(obj){if(typeof Symbol===\"function\"&&typeof Symbol.iterator===\"symbol\"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol===\"function\"&&obj.constructor===Symbol&&obj!==Symbol.prototype?\"symbol\":typeof obj;};}return _typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)===\"object\"||typeof call===\"function\")){return call;}return _assertThisInitialized(self);}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o);};return _getPrototypeOf(o);}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function\");}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass);}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o;};return _setPrototypeOf(o,p);}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return self;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}import React,{Component}from'react';import{isNil,omit}from'ramda';import FormContext from\"../contexts/form-context\";import{getFieldData,getValueForFieldData,getInitialValue,getErrorsForFieldData,insertValueInFieldData,cleanErrorsInFieldData,checkRequiredFieldData,insertErrorsInFieldData}from\"../functions/input-functions\";var withFormContext=function withFormContext(WrappedComponent){var _class,_temp;return _temp=_class=/*#__PURE__*/function(_Component){_inherits(WithFormContext,_Component);function WithFormContext(props){var _this;_classCallCheck(this,WithFormContext);_this=_possibleConstructorReturn(this,_getPrototypeOf(WithFormContext).call(this,props));_this.handleOnValidate=_this.handleOnValidate.bind(_assertThisInitialized(_assertThisInitialized(_this)));_this.handlerOnChange=_this.handlerOnChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));_this.fieldName=props.name;return _this;}_createClass(WithFormContext,[{key:\"componentDidMount\",value:function componentDidMount(){var onFieldMount=this.context.onFieldMount;onFieldMount(this.props);}},{key:\"handleOnValidate\",value:function handleOnValidate(value,fieldData){var onValidate=this.props.onValidate;var result=onValidate(value);if(isNil(result)){return fieldData;}return insertErrorsInFieldData(result,fieldData);}},{key:\"handlerOnChange\",value:function handlerOnChange(value,fieldData){var onChange=this.props.onChange;if(onChange){onChange(value);}var onFieldChange=this.context.onFieldChange;var cleanedFieldData=cleanErrorsInFieldData(fieldData);var updatedFieldData=insertValueInFieldData(value,cleanedFieldData);var checkedRequiredFieldData=checkRequiredFieldData(value,updatedFieldData);var validatedFieldData=this.handleOnValidate(value,checkedRequiredFieldData);onFieldChange(validatedFieldData);}},{key:\"render\",value:function render(){var _this2=this;var _this$context=this.context,initialValue=_this$context.initialValue,globalErrors=_this$context.globalErrors,fields=_this$context.fields,onSubmit=_this$context.onSubmit;var safeProps=omit(['onChange','value','onValidate'],this.props);var fieldData=getFieldData(this.fieldName,fields);if(isNil(fieldData)){return React.createElement(\"p\",null,\"Loading\");}return React.createElement(WrappedComponent,Object.assign({initial_value:getInitialValue(this.fieldName,initialValue),value:getValueForFieldData(fieldData),global_errors:globalErrors,errors:getErrorsForFieldData(fieldData),error:fieldData.error,onChange:function onChange(value){return _this2.handlerOnChange(value,fieldData);},onSubmit:onSubmit},safeProps));}}]);return WithFormContext;}(Component),_defineProperty(_class,\"contextType\",FormContext),_defineProperty(_class,\"defaultProps\",{onValidate:function onValidate(){return null;},onChange:function onChange(value){return value;},value:''}),_temp;};export default withFormContext;",{"version":3,"sources":["/home/kan/desarrollo/proyectos/components/touka-forms/src/hocs/with-form-context.jsx"],"names":["React","Component","isNil","omit","FormContext","getFieldData","getValueForFieldData","getInitialValue","getErrorsForFieldData","insertValueInFieldData","cleanErrorsInFieldData","checkRequiredFieldData","insertErrorsInFieldData","withFormContext","WrappedComponent","props","handleOnValidate","bind","handlerOnChange","fieldName","name","onFieldMount","context","value","fieldData","onValidate","result","onChange","onFieldChange","cleanedFieldData","updatedFieldData","checkedRequiredFieldData","validatedFieldData","initialValue","globalErrors","fields","onSubmit","safeProps","error"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport PropTypes from 'prop-types'\nimport { isNil, omit } from 'ramda'\nimport FormContext from 'contexts/form-context'\nimport {\n  getFieldData, getValueForFieldData, getInitialValue, getErrorsForFieldData, insertValueInFieldData,\n  cleanErrorsInFieldData, checkRequiredFieldData, insertErrorsInFieldData,\n} from 'functions/input-functions'\n\n\nconst withFormContext = WrappedComponent => class WithFormContext extends Component {\n  static contextType = FormContext\n\n  static propTypes = {\n    name: PropTypes.string.isRequired,\n    onValidate: PropTypes.func,\n    onChange: PropTypes.func,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.number]),\n  }\n\n  static defaultProps = {\n    onValidate: () => (null),\n    onChange: value => value,\n    value: '',\n  }\n\n  constructor(props) {\n    super(props)\n    this.handleOnValidate = this.handleOnValidate.bind(this)\n    this.handlerOnChange = this.handlerOnChange.bind(this)\n    this.fieldName = props.name\n  }\n\n  componentDidMount() {\n    const { onFieldMount } = this.context\n    onFieldMount(this.props)\n  }\n\n  handleOnValidate(value, fieldData) {\n    const { onValidate } = this.props\n    const result = onValidate(value)\n    if (isNil(result)) {\n      return fieldData\n    }\n    return insertErrorsInFieldData(result, fieldData)\n  }\n\n  handlerOnChange(value, fieldData) {\n    const { onChange } = this.props\n    if (onChange) {\n      onChange(value)\n    }\n    const { onFieldChange } = this.context\n    const cleanedFieldData = cleanErrorsInFieldData(fieldData)\n    const updatedFieldData = insertValueInFieldData(value, cleanedFieldData)\n    const checkedRequiredFieldData = checkRequiredFieldData(value, updatedFieldData)\n    const validatedFieldData = this.handleOnValidate(value, checkedRequiredFieldData)\n    onFieldChange(validatedFieldData)\n  }\n\n  render() {\n    const {\n      initialValue, globalErrors, fields, onSubmit,\n    } = this.context\n    const safeProps = omit(['onChange', 'value', 'onValidate'], this.props)\n    const fieldData = getFieldData(this.fieldName, fields)\n    if (isNil(fieldData)) {\n      return (<p>Loading</p>)\n    }\n    return (\n      <WrappedComponent\n        initial_value={getInitialValue(this.fieldName, initialValue)}\n        value={getValueForFieldData(fieldData)}\n        global_errors={globalErrors}\n        errors={getErrorsForFieldData(fieldData)}\n        error={fieldData.error}\n        onChange={value => this.handlerOnChange(value, fieldData)}\n        onSubmit={onSubmit}\n        {...safeProps}\n      />\n    )\n  }\n}\n\nexport default withFormContext\n"]}]}